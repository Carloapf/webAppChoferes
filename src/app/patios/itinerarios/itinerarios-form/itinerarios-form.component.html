<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
    <title>diesel-view</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <content>
        <div style="height: 90vh; overflow: auto;">
            <div class="form-check form-switch" style="margin-left: 40px; margin-top: 35px;"
                *ngIf="contenedor.Botando == false">
                
                <input class="form-check-input" type="checkbox" (change)="onSwitchChange()" style="padding-left: 40px;">
                <label class="form-check-label" for="flexSwitchCheckDefault" style="margin-left: 10px;">Buscar por
                    ContenedorID o Work OrdenID </label>
            </div>
            <div class="" style="margin: 10px auto;">
                <!--
            <div class="ui buttons" style="width: 100%; margin-bottom: 5px;" ng-if="contenedor.Botando == false">
                <button class="ui button {{opcion == 1 ? 'positive' : ''}}" ng-click="opcionSel(1)">Contenedor</button>
                <div class="or"></div>
                <button class="ui  {{opcion == 2 ? 'positive' : ''}} button"  ng-click="opcionSel(2)">Work Order</button>
            </div> -->
                <div *ngIf="contenedor.Botando == false" style="margin-bottom: 10px;">
                    <div class="field" *ngIf="switchValue == 1">
                        <label>Contenedor</label>
                        <div class="ui icon input">
                            <input type="text" [(ngModel)]="contenedor.Contenedor">
                            <button class="btn btn-success" (click)="buscarContenedor(false)">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                        <!-- <div style="margin-top: 5px;" class="ui fluid red button" ng-click="scanNow()">Escanear</div> -->
                    </div>
                    <div class="field" *ngIf="switchValue == 2">
                        <label>Work Order</label>
                        <div class="ui icon input">
                            <input type="text" [(ngModel)]="contenedor.WContenedorID">
                            <button class="btn btn-info" (click)="buscarContenedor(false)">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="field" *ngIf="!contenedor.Contenedor">
                    <ion-checkbox [(ngModel)]="contenedor.Botando" (click)="botando()">Botando</ion-checkbox>
                </div>
                <div *ngIf="flag">
                    <ul class="list-group">
                        <!--<div class="ui fluid button" style="background-color: #021B91; color: #FFFFFF" ng-click="inspeccion()">Inspección</div>-->
                        <li class="list-group-item">
                            <div class="" *ngIf="!contenedor.Botando">
                                <label>Contenedor</label>
                                <input mdbInput type="text" id="Contenedor" class="form-control"
                                    placeholder="Contenedor" [(ngModel)]="contenedor.Contenedor" *ngIf="nuevo" />
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="field">
                                <label>Cliente</label>
                                <select class="form-select" aria-label="EquipmentProvider" *ngIf="nuevo"
                                    [(ngModel)]="contenedor.ClienteID" (change)="changeCliente()">
                                    <option selected disabled>Select Cliente</option>
                                    <option *ngFor="let x of billto" [value]="x.id">{{ x.nombre }}</option>
                                </select>
                                <!--<select class="form-control" id="clientes1" name="clientes1" ng-if="nuevo"
                        ng-options="x.id as x.nombre for x in billto" 
                        ng-model="contenedor.ClienteID"
                        ng-change="changeCliente()">
                    </select>-->
                                <div *ngIf="!nuevo">{{contenedor.cliente}}</div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="field">
                                <label>Origen</label>
                                <!--<input-dropdown namex="origen" datax="rutas" ng-model="contenedor.RutaID" ng-if="nuevo"></input-dropdown>-->
                                

                                    <input mdbInput type="text" id="origen" class="form-control"
                                    placeholder="Origen" [(ngModel)]="contenedor.origen"
                                     *ngIf="nuevo && !contenedor.ClienteID" />

                                <select class="form-select" aria-label="rutas" *ngIf="nuevo && contenedor.ClienteID"
                                    [(ngModel)]="contenedor.RutaID">
                                    <option selected disabled>Select Ruta</option>
                                    <option *ngFor="let x of rutas" [value]="x.id">{{ x.nombre }}</option>
                                </select>

                                <!--<select class="form-control" id="origen" name="origen" ng-if="nuevo && contenedor.ClienteID"
                        ng-options="x.id as x.nombre for x in rutas" 
                        ng-model="contenedor.RutaID">
                    </select>-->
                                <div *ngIf="!nuevo">{{contenedor.origen}}</div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="field" *ngIf="!contenedor.Botando">
                                <label>Proveedor de equipo</label>
                                <select class="form-select" aria-label="EquipmentProvider"
                                    [(ngModel)]="contenedor.EquipmentProvider">
                                    <option selected disabled>Select EquipmentProvider</option>
                                    <option *ngFor="let x of equipmentProvider" [value]="x.id">{{ x.nombre }}</option>
                                </select>

                                <!--<select class="form-control" id="clientes2" name="clientes2" 
                        ng-options="x.id as x.nombre for x in equipmentProvider" 
                        ng-model="contenedor.EquipmentProvider">
                    </select>-->
                            </div>
                        </li>
                        <!--                <div class="field" ng-if="!contenedor.Botando">
                    <label>Proveedor de equipo ext</label>
                    <input type="text" ng-model="contenedor.EquipmentProviderExt">
                    </div>-->
                        <li class="list-group-item">
                            <div class="field" *ngIf="contenedor.Botando == false">
                                <label>País de las placas del camión</label>
                                <select class="form-select" aria-label="EquipmentProvider" *ngIf="nuevo"
                                    [(ngModel)]="contenedor.PaisID" (change)="getEstados()">
                                    <option selected disabled>Select PaisID</option>
                                    <option *ngFor="let x of paises" [value]="x.id">{{ x.nombre }}</option>
                                </select>

                                <!--<select class="form-control" id="pais" name="pais" ng-if="nuevo"
                        ng-options="x.id as x.nombre for x in paises" 
                        ng-model="contenedor.PaisID"
                        ng-change="getEstados()">
                    </select>-->
                                <div *ngIf="!nuevo">MEX: {{contenedor.estadomex ? 'Sí' : 'No'}} | USA:
                                    {{contenedor.estadousa ?
                                    'Sí' : 'No'}}</div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="field" *ngIf="contenedor.Botando == false">
                                <label>Estado de las placas del camión</label>
                                <select class="form-select" aria-label="EquipmentProvider" *ngIf="nuevo"
                                    [(ngModel)]="contenedor.EstadoID">
                                    <option selected disabled>Select estados</option>
                                    <option *ngFor="let x of estados" [value]="x.id">{{ x.nombre }}</option>
                                </select>

                                <!--<select class="form-control" id="estado" name="estado" ng-if="nuevo"
                        ng-options="x.id as x.nombre for x in estados" 
                        ng-model="contenedor.EstadoID">
                    </select>-->
                                <div *ngIf="!nuevo">MEX: {{contenedor.estadomex}} | USA: {{contenedor.estadousa}}</div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="field" *ngIf="contenedor.Botando == false">
                                <label>Placas del camión</label>
                                
                                <input mdbInput type="text" id="PlacasUnidad" class="form-control"
                                    placeholder="PlacasUnidad" [(ngModel)]="contenedor.PlacasUnidad"
                                     *ngIf="nuevo"/>

                                <div *ngIf="!nuevo">{{contenedor.PlacasUnidad}}</div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="field" *ngIf="contenedor.Botando == false">
                                <label>Sello</label>
                                
                                <input mdbInput type="text" id="Sello" class="form-control"
                                    placeholder="Sello" [(ngModel)]="contenedor.Sello"/>
                               
                                <span>Tomar foto del sello</span><br>
                                <button class="btn btn-dark" style="margin-top: 10px;" (click)="tomarFotoSello()"><i style="font-size: 14px;"
                                    class="white fas fa-camera"></i></button><br>

                                <!-- <input type="text" ng-model="contenedor.Sello" ng-if="nuevo">
                    <div ng-if="!nuevo">{{contenedor.Sello}}</div> -->
                                <img style="width: 200px;" *ngIf="contenedor.FotoSello" [src]="contenedor.FotoSello">
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="field" *ngIf="nuevo">
                                <label>Empresa del chofer</label>
                                
                                <input mdbInput type="text" id="EmpresaChofer" class="form-control"
                                    placeholder="EmpresaChofer" [(ngModel)]="contenedor.EmpresaChofer"/>
                                <!--<div>{{contenedor.EmpresaChofer}}</div>-->
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="field">
                                <label>Chofer</label>
                                
                                <input mdbInput type="text" id="NombreChofer" class="form-control"
                                    placeholder="NombreChofer" [(ngModel)]="contenedor.NombreChofer"
                                    *ngIf="nuevo && (contenedor.WContenedorID == 0 || contenedor.Botando)"/>
                                <!--<input-dropdown datax="choferes" namex="choferes" ng-model="contenedor.ChoferID" default="contenedor.ChoferID" ng-if="nuevo && contenedo.WContenedorID > 0"></input-dropdown>-->
                                <div *ngIf="!nuevo">{{contenedor.NombreChofer}}</div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="field">
                                <label>No. Economico Camión</label>
                            
                                <input mdbInput type="text" id="camion" class="form-control"
                                    placeholder="Camion" [(ngModel)]="contenedor.camion"
                                    *ngIf="nuevo && (contenedor.WContenedorID == 0 || contenedor.Botando)"/>
                                <!--<input-dropdown datax="camiones" namex="camiones" ng-model="contenedor.CamionID" default="contenedor.camionID" ng-if="nuevo && contenedo.WContenedorID > 0"></input-dropdown>-->
                                <div *ngIf="!nuevo">{{contenedor.camion}}</div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="field">
                                <label>Carrier</label>
                                
                                <input mdbInput type="text" id="Carrier" class="form-control"
                                    placeholder="Carrier" [(ngModel)]="contenedor.Carrier"/>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="field">
                                <label>Fecha de llegada</label>
                                <!--<input type="text" ng-model="contenedor.FechaLlegada | luDate: 'full'" readonly>-->
                                <div>{{contenedor.FechaEvento | luDate: 'full'}}</div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="field" *ngIf="contenedor.Botando == false">
                                <label>Estado de carga</label>
                                <select class="form-select" aria-label="estadosContenedor" *ngIf="nuevo"
                                    [(ngModel)]="contenedor.EstadoCarga">
                                    <option selected disabled>Select estadosContenedor</option>
                                    <option *ngFor="let x of estadosContenedor" [value]="x.id">{{ x.nombre }}</option>
                                </select>

                                <!--<select class="form-control" id="estadosContenedor" name="estadosContenedor" 
                        ng-options="x.id as x.nombre for x in estadosContenedor" 
                        ng-model="contenedor.EstadoCarga" ng-if="nuevo">
                    </select>-->
                                <div *ngIf="!nuevo">{{contenedor.carga}}</div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="field" *ngIf="contenedor.Botando == false">
                                <label>Size</label>
                                <select class="form-select" aria-label="sizes" *ngIf="nuevo"
                                    [(ngModel)]="contenedor.Tamano">
                                    <option selected disabled>Select estadosContenedor</option>
                                    <option *ngFor="let x of sizes" [value]="x.id">{{ x.nombre }}</option>
                                </select>
                                <!--<select class="form-control" id="sizes" name="sizes" ng-if="nuevo"
                                    ng-options="x.id as x.nombre for x in sizes" 
                                    ng-model="contenedor.Tamano">
                                </select>-->
                                <div *ngIf="!nuevo">{{contenedor.Tamano}}</div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="field">
                                <label>Remark</label>
                                <div class="input-group">
                                    <span class="input-group-text">Remark</span>
                                    <textarea class="form-control" [(ngModel)]="contenedor.Nota" aria-label="With textarea"></textarea>
                                  </div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <button type="button" class="btn btn-primary" (click)="abrirFirma()">Firmas</button>
                        </li>

                        <li class="list-group-item">
                        <button class="btn btn-primary" (click)="revision()" style="margin-bottom: 10px;">Revisión
                        </button>
                        <button class="btn btn-warning" (click)="firma()" style="margin-bottom: 10px;">Firma K9</button>
                        <button class="btn btn-success" (click)="guardarContenedor()"
                        *ngIf="puntos && contenedor.FotoSello && contenedor.FirmaChofer && contenedor.FirmaGuardia"
                            style="margin-bottom: 10px;">Aceptar</button>
                        
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="toast-container top-0 end-0 p-3">
        <div class="toast bg-success" id="liveToast" role="alert" aria-live="assertive" aria-atomic="true">
            
            <div class="toast-body" >
                <p>¡Se ha guardado!</p>
                <button type="button" style="margin-left: 150px;" class="btn-close" data-bs-dismiss="toast" aria-label="Cerrar"></button>
                    
            </div>
          </div>
        </div>
          
    </content>
</body>
</html>